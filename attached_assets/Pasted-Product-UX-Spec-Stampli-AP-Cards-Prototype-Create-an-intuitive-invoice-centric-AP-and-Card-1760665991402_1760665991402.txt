Product & UX Spec — “Stampli AP + Cards” (Prototype)Create an intuitive, invoice-centric AP and Card Management experience where users can request, approve, issue, and reconcile virtual cards directly within a single unified workspace — eliminating the separation between invoice processing, expense management, and card payments.

Visual tone:Clean, modern, and professional; generous whitespace; flat card-based layouts with soft shadows.Use a white/gray background with Stampli’s signature blue-green accents (#00B6C2 / #18C0C4) and minimalist icons.Typography should feel confident yet friendly — clear headers, easy-to-scan tables, and conversational tooltips.Interaction patterns:Every workflow starts from an invoice or transaction, keeping the “invoice-first” philosophy central.Focus on collaboration and context — show comments, approvals, and audit history inline.Keep control and flexibility front and center: issue, limit, suspend, and cancel cards instantly; show pre-defined GL coding, vendor details, and reconciliation status in one viewMirror Stampli’s style of progressive disclosure — simple primary actions (e.g., “Pay via Card”) that expand into detailed drawers or modals for advanced controls.Page layout inspiration:Left navigation: Invoices ▸ Cards ▸ Expenses ▸ Approvals ▸ Reconciliation ▸ ReportsCentral workspace: scrollable tables and collapsible drawers for details.Right sidebar: contextual chat / approval history (optional to prototype).1) Cards Listing PagePurpose: One place to see and manage all virtual cards.Content & layoutHeader with Search (card name, vendor), Filters (Active/Inactive, One-time/Recurring, Department, Owner), and Sort (Newest, Oldest, Highest limit, Most spend).Card tiles/table showing for each card:Card nickname, masked last 4, vendor (if vendor-locked), status (Active/Suspended/Expired), limit & remaining, type (One-time/Recurring), owner, and tags (e.g., AP Flow, Expense Flow).Quick indicators: Policy locks (MCC/vendor), auto-pay rail (MCP/Visa Commercial Pay), and coding template applied.Actions:View Details (opens Card Details page).Request New Virtual Card (primary CTA).Empty stateFriendly message + “Request New Virtual Card” CTA.2) Card Details PagePurpose: Deep view for a single card.HeaderCard nickname + masked PAN (•••• 1234), status chip, owner, and creation date.For AP-issued recurring cards: controls and coding appear view-only (clearly labeled).SectionsCard Controls (read-only unless permitted)Velocity controls: per-txn limit, daily/monthly caps, expiry date.Locks: MCC allowlist, allowed merchants/vendor lock.Buttons: Request Limit Change (opens a small request panel to propose new limits/restrictions and route for approval), Suspend, Cancel (if permitted).Payment RailShows Auto-pay rail availability:“Automated via MCP” / “Automated via Visa Commercial Pay” if the linked vendor is enrolled.Else: “Secure Sharing available” (one-time secure link).Execute Payment button (if invoice-linked and outstanding).Transaction ListTabs: All | Approved | Pending | Declined.Columns: Date/Time, Vendor, Amount, Status, Reason (for declines), Linked object (Invoice/Expense #), Coding status (Coded/Needs review).Row click → opens Transaction Coding drawer (see Section 5).Coding Template (applies to all transactions on this card)Default GL account, vendor, department, class, location, project.Line-item split rules (e.g., 70% Dept A / 30% Dept B, or by item category).Badge: “Inherited from Invoice” or “Custom for Card” (read-only for AP-inherited).3) Request New Virtual Card (Wizard)Entry points: Cards Listing (primary), Expense dashboard, or from an Invoice (see Section 4).Step 1: PurposeChoose AP Flow (Vendor Payment) or Expense Flow (Employee Use).Name the card; optional note.Step 2: Limits & VelocityAmount limit (per txn), daily/monthly caps, validity window (start/end).Toggle Recurring (month-over-month).Step 3: ControlsVendor lock (select vendor or free text).Allowed merchants (autocomplete from directory).MCC allowlist (multi-select or preset “Policy pack”).Auto-pay rail preview:If vendor enrolled: “Automated via MCP / Visa Commercial Pay available.”If not: “Secure Sharing (one-time link) will be used.”Step 4: Transaction CodingSet default GL account, vendor, department, class, location.Optional split rules by percentage or by line category.Toggle “Inherit from Invoice” if AP Flow and an invoice is referenced.Review & SubmitSummary with policy checks.Submit → routes to Approvals (unless AP-from-approved-invoice; see Section 4).4) Invoice Listing & Pay-by-CardPurpose: Manage invoices and pay approved ones by card.LayoutTabs: Unpaid | Partially Paid | Paid.Table columns: Vendor, Invoice #, Amount, Due date, Status, Payment Method (Check/ACH/Card), Card badge if card-paid, and Actions.Vendor card acceptanceEach invoice row shows “Accepts Card” if the vendor is enrolled for MCP/VCP; otherwise, “Card delivery only.”Invoice detail drawerShows invoice header, attachments, approval trail, and Payment options: Check / ACH / Card.If Card is chosen (AP Flow):Instant card generation in the background with:Vendor lock, per-invoice limit, validity window from payment terms.Transaction coding inherited from the invoice.No extra approvals (approval inherited from invoice).After creation:If vendor enrolled → “Pay via MCP/Visa Commercial Pay” (one-click).If not enrolled → “Securely Share Card Details” (one-time link).The invoice remains open until a successful auth/settlement returns; then it moves to Paid (or Partially Paid if split).BadgingIn lists and invoice detail, clearly show: Paid via Card, Partially Paid via Card, or Pending Card Payment.5) Transaction Coding WorkspacePurpose: One place to manage coding for all card transactions, regardless of how the card was created.AccessLeft nav: Transactions.ListFilters: Needs Coding, Coded, Synced; by Vendor, Department, Card, Owner.Columns: Date, Vendor, Amount, Source (Invoice/Expense/Direct), Card, Coding status, ERP Sync status.Row actions (drawer)Header: Transaction metadata + link to card/invoice.Coding panel: GL, vendor, department, class, location, line-item splits, notes.Apply card template (one-click) with ability to tweak.Mark as Ready → appears in ERP Sync with status Coded.6) Card Request ApprovalsPurpose: Inbox for all card-related approvals.TabsPending on Me, Approved, Declined.Rows showRequestor, purpose, amount, vendor lock, key controls (MCC/merchant lock), and coding snapshot.ActionsApprove / Decline / Edit (adjust limits, dates, MCC, vendor).Comments required on decline; changes are tracked in the audit log.7) Transaction MonitoringPurpose: Real-time visibility and troubleshooting.FeedStatus chips: Authorized, Settled, Pending, Declined.Decline reason surface (limit exceeded, inactive vendor, MCC blocked, expired).Click through to card or transaction coding drawer.NotificationsToasts/in-app inbox for declines and settlements.8) Reconciliation & ERP SyncPurpose: Close the loop to accounting.DashboardBuckets: Coded & Ready, Pending Coding, Failed Sync.Bulk actions: Sync to ERP, Retry Sync, Export CSV (mock).Row detailShows mapping applied (GL, dimensions), linked object (invoice/expense), and sync result.9) Reporting (Managers & Admins)Purpose: Unified view of spend across invoices and cards.FiltersDate range, Department, Vendor, Payment Method (Check/ACH/Card), Card Type (One-time/Recurring), Flow (AP/Expense).ReportsSpend by Vendor, Spend by Department, Card GMV, % Vendors Paid by Card, Reconciliation Success %.Each card transaction shows cashback estimate (0.7–1.0%).ExportsSummary and transaction-level (mocked).10) Payment Execution Choices (AP Flow)When executing payment on a card from an invoice:If the vendor is enrolled: “Automate via MCP / Visa Commercial Pay” (label shows which rail).If not enrolled: “Securely Share Card Details” (one-time link) with clear confirmation.After success, show “Payment Confirmed” with settlement details and move invoice to Paid.11) Role & Permission NotesAP Clerk: Create AP cards from invoices, execute payments, view transactions, request limit changes.Approver/Manager: Approve/decline/modify requests.Controller: Override controls, manage reconciliation, approve large limits.CFO: View analytics and reports only.Employee: Create expense requests and view “My Cards” & transactions.12) UX Details & StatesClear chips/badges for statuses: Approved, Pending, Declined; Paid via Card; Automated (MCP/VCP); Secure Sharing.Empty states with short guidance and CTAs.Audit log on Card Details and Requests (who, what, when).Tooltips explaining rails (MCP/VCP) vs secure sharing.